Title: Format String Vulnerability Lab Exercise

1. Background

This Labtainer exercise explores formatted string
vulnerabilities resulting from use of printf
with a user input string.  It is derived from 
the lab described in Format_String.pdf found at
www.cis.syr.edu/~wedu/seed/software_security.html

These lab instructions augment that Format_String.pdf
manual.  Perform the tasks describe in these instructions
and refer to that manual and other resources, e.g., course
notes and lectures, to learn about format string 
vulnerabilities.

2. Performing the lab
The lab is started from the Labtainer working 
directory on your Docker-enabled host, e.g., a Linux VM.
From there, issue the command:

    start.py formatstring

The resulting virtual terminals will include a display of
these instructions, and a bash shell.  The vuln_prog.c 
described in Format_String.pdf will be in your home directory.

To navigate this instruction, the arrow keys along with 
with the Space/Home/End/Page-Up/Page-Down keys are usable.
To exit navigation of this instruction, type 'q'.

3. Tasks

a) Ensure that Address Space Layout Randomization (ASLR) is enabled:

      sudo sysctl -w kernel.randomize_va_space=2

b) Crash the vulnerable program

c) Cause the secret[1] value to be displayed by the printf function.

d) Cause the printf function to modify the secret[1] value

e) Cause the printf function to modify secret[1] to have a value of 0xa

f) Modify vul_prog.c to remove the first scanf statement and recompile with:
    gcc -m32 -fno-stack-protector -g -o vul_prog vul_prog.c

g) Disable ASLR:

      sudo sysctl -w kernel.randomize_va_space=0

h) Cause the secret[1] value to be displayed by the printf function.


4. Stop the Labtainer

When the lab is completed, or you'd like to stop working for a while, run

    stop.py formatstring

from the host Labtainer working directory.  You can always restart the
Labtainer to continue your work.  When the Labtainer is stopped, a
zip file is created and copied to a location displayed by the stop.py
command.  When the lab is completed, send that zip file to the instructor.


