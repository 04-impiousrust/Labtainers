\documentclass{article}
\usepackage{geometry}
\geometry{a4paper, total={170mm,257mm},left=20mm, top=20mm, }
\usepackage[colorlinks=true,linkcolor=blue,urlcolor=black]{hyperref}
\usepackage{bookmark}
\begin{document}
\title {Labtainer Instructor Guide\vspace{-4ex}}
\maketitle

\section {Introduction}
This manual is intended for use by instructors who assign and/or grade
labs using Labtainers.
Labtainers assume you have a Linux system, e.g., a virtual machine.  Refer to
in Appendix~\ref{sec:appendixA} for installation of Virtual Box and a Linux system.

\subsection{Obtaining Labtainers and installing Docker}
The Labtainers environment is distributed as a tarball from:
\url{https://my.nps.edu/documents/107523850/109121362/labtainer.tar/6fc80410-e87d-4e47-ae24-cbb60c7619fa}
Untar this file in your Linux system.

Install Docker by running one of the install-docker scripts, depending on your Linux
distribution:
\begin{verbatim}
    ./labtainer/trunk/setup_scripts/install-docker-ubuntu.sh
\end{verbatim}
\noindent or 
\begin{verbatim}
    ./labtainer/trunk/setup_scripts/install-docker-fedora.sh
\end{verbatim}
If you have a different Linux distribution, find instructions for installing Docker at
\url{https://docs.docker.com/engine/installation/}

If you already have Dockers installed, or installed Docker for a different distribution,
make sure you also have python, and
the python \textit{netaddr} module installed.

\subsection{Assiging a Lab}
Student instructions for using Labtainers are in labtainers-student.pdf.  Available labs are
listed at 
\begin{verbatim}
    labtainers/trunk/labs
\end{verbatim}

\subsection{Assessing a Lab}
Collect all of the lab zip files from each student into the Labtainer xfer directory, which
is typically at
\begin{verbatim}
    ~/labtainers/<labname>
\end{verbatim}
All labs are assessed from the same Labtainer workspace:
\begin{verbatim}
    cd labtainers/trunk/scripts/labtainers-instructor
\end{verbatim}
\noindent Then start the lab containers:
\begin{verbatim}
    ./start.py <labname>
\end{verbatim}

The first time any given lab is started, it may take a while to build the Docker images 
required for the lab.  Subsequent runs will start much faster.

In one of the resulting virtual terminals, run:
\begin{verbatim}
    instructor.py
\end{verbatim}
\noindent This will generate the grading output file and display the file name.  In
addition to the grading output, a directory is created that will contain each student's
home directory content.  And container-specific artifacts are found in:
\begin{verbatim}
    <student_dir>/<container>/.local/result
\end{verbatim}

While running the lab, if you require more virtual terminals, use:
\begin{verbatim}
    ./moreterm.py <labname> <container>
\end{verbatim}

When you are finished, or wish to stop working, type:
\begin{verbatim}
    ./stop.py <labname>
\end{verbatim}
The stop.py command will terminate the containers.  This is recommended to avoid network
name conflicts when assessing other labs.

\newpage
\appendix 
\section {Appendix A: Installing Virtual Box and Ubuntu}
\label{sec:appendixA}
The instructions below describe installation of an Ubuntu Linux VM 
to serve as the Labtainer host.  If you already have a Linux system
that can support Dockers, you may skip this section.
\begin{itemize}
\item Install Virutal Box from : https://www.virtualbox.org/wiki/Downloads
\item Download the latest Ubuntu LTS distribution .iso image.
\item Use VirtualBox to create a new VM, allocate at least 10GB of disk storage.
\item Select the Ubuntu iso image in the VirtualBox storage settings, and select "Live CD/DVD"
\item Power on the virtual machine and install Ubuntu.
\end{itemize}

The following additions simplify movement of files between Virtual Box guests
and the host computer.

To setup shared folder:
\begin{itemize}
\item create or identify a folder on the host to share with the guest
\item on the virtualbox guest, select "settings" / "Shared Folders",
then select host's shared folder.

\item download a virtualbox guest additions iso from 
\url{http://download.virtualbox.org/virtualbox} and select
the version of virtual box you are using (5.0.24 for example)

\item on the virtualbox guest, select "settings" / "Storage" and
change the CD rom to mount the iso downloaded

\item If the guest additions does not automatically prompt you, then mount the CD 
inside the guest then run the guestadditions

\item Once VBox Guest Additions is completed, reboot the guest

\item Add the user (in the guest) to the vboxsf group:
\begin{verbatim}
    sudo adduser $USER vboxsf
\end{verbatim}
\end{itemize}


\end{document}
